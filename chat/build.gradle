apply plugin: 'com.android.application'
// 华为推送，agconnect-services.json 文件也得在在application module的根目录
apply plugin: 'com.huawei.agconnect'

apply plugin: 'com.google.gms.google-services'

android {
    signingConfigs {
        wfc {
            keyAlias 'wfc'
            keyPassword 'wildfirechat'
            storeFile file('../wfc.keystore')
            storePassword 'wildfirechat'
        }
    }
    compileSdkVersion 34
    ndkVersion '18.1.5063045'
    defaultConfig {
        applicationId "cn.wildfirechat.chat.open"
        minSdkVersion 24
        targetSdkVersion 34
        versionCode 62
        versionName '1.3.7'
        multiDexEnabled true
        javaCompileOptions {
            annotationProcessorOptions {
//                includeCompileClasspath true
            }
        }

        ndk {
            //noinspection ChromeOsAbiSupport
            abiFilters 'armeabi-v7a', 'arm64-v8a' // ，'armeabi', 'arm64-v8a', 'x86', 'x86_64'
        }


        manifestPlaceholders = [
            // 个推，未使用个推推送时，不用配置
            GETUI_APPID    : "",

            // 极光，未使用极光推送时，不用配置
            JPUSH_PKGNAME  : applicationId,
            JPUSH_APPKEY   : "0549efd1f1d434c70aa440d1",
            JPUSH_CHANNEL  : "developer-default",

            // 厂商相关参数
            // 华为 相关应用参数
            HUAWEI_APP_ID  : "",
            // 为了兼容，个推集成时，使用的是这个，值要和 HUAWEI_APP_ID 相同
            HMS_APP_ID     : "",

            // 小米相关应用参数
            XIAOMI_APP_ID  : "",
            XIAOMI_APP_KEY : "",
            // for jpush
            XIAOMI_APPID   : "MI-小米的APPID",
            XIAOMI_APPKEY  : "MI-小米的APPKEY",

            // OPPO 相关应用参数
            OPPO_APP_KEY   : "",
            OPPO_APP_SECRET: "",
            // for jpush，OPPO 的参数需要添加前缀 “OP-”。
            OPPO_APPKEY    : "OP-您的应用对应的OPPO的APPKEY",
            OPPO_APPID     : "OP-您的应用对应的OPPO的APPID",
            OPPO_APPSECRET : "OP-您的应用对应的OPPO的APPSECRET",

            // VIVO 相关应用参数
            VIVO_APP_ID    : "",
            VIVO_APP_KEY   : "",
            // for jpush
            VIVO_APPKEY    : "vivo的APPKEY",
            VIVO_APPID     : "vivo的APPID",


            // 魅族相关应用参数
            MEIZU_APP_ID   : "",
            MEIZU_APP_KEY  : "",
            // for jpush，有 MZ- 前缀
            MEIZU_APPID    : "MZ-您的应用对应的魅族的APPKEY",
            MEIZU_APPKEY   : "MZ-您的应用对应的魅族的APPID",


            // 荣耀相关应用参数
            HONOR_APP_ID   : "",
            // for jpush
            HONOR_APPID    : "Honor的APP ID",
        ]

    }
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            //signingConfig signingConfigs.wfc
        }
        debug {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        coreLibraryDesugaringEnabled true
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    productFlavors {
    }
    namespace 'cn.wildfirechat.chat'
    lint {
        abortOnError false
    }
    buildFeatures {
        buildConfig true
    }

    // 如果提示 libc++_shared.so 冲突，打开下面的注释
//    packagingOptions {
//        pickFirst 'lib/x86/libc++_shared.so'
//        pickFirst 'lib/arm64-v8a/libc++_shared.so'
//        pickFirst 'lib/armeabi-v7a/libc++_shared.so'
//        pickFirst 'lib/x86_64/libc++_shared.so'
//    }
}

dependencies {
    implementation fileTree(dir: "libs", include: ["*.jar", "*.aar"])
    compileOnly fileTree(dir: "../uikit-aar-dep", include: ["zxing-lite-1.1.1.aar"])
    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:2.1.5'
    implementation 'com.tencent.bugly:crashreport:latest.release'
    implementation 'androidx.multidex:multidex:2.0.1'

    // 推送方案选择
    // 直接对接厂商推送
    implementation project(':push')
    implementation fileTree(dir: "../push-aar-dep", include: ["*.aar"])

    // 对接个推，需要在个推后台配置厂商通道相关信息
//    implementation project(':push-getui')

    // 对接极光，需要在个推后台配置厂商通道相关信息
//    implementation project(':push-jpush')

    implementation 'com.github.tiann:FreeReflection:3.1.0'

    // 仅高级版音视频 SDK 才支持 uvc 功能，默认关闭，如果需要，请取消注释下面的依赖
//    implementation project(':uvccamera')

    // 采用 library module 的方式依赖 uikit，如果需要采用 aar 方式集成，请仔细下面的注释
    implementation project(':uikit')

    // 采用 aar 方式依赖 uikit，
    /*
    implementation fileTree(dir: "uikit_aars", include: ["*.aar"])
    // 采用 aar 方式集成时，还需要下面这些依赖
    // wfc kit start
    // project 相关的依赖，已编译成 aar 放到了 uikit_aars 目录
//    implementation project(':webrtc')
//    implementation project(':client')
//    implementation project(':avenginekit')
//    implementation project(':emojilibrary')
//    implementation project(':imagepicker')
//    implementation project(':pttclient')


    implementation 'com.lqr.adapter:library:1.0.2'
    implementation 'com.jaeger.statusbaruitl:library:1.3.5'

    implementation 'androidx.appcompat:appcompat:1.3.0-alpha01'
    implementation 'com.google.android.material:material:1.3.0-alpha01'
    implementation 'cjt.library.wheel:camera:1.1.9'
    implementation 'com.github.bumptech.glide:glide:4.9.0'
    annotationProcessor 'com.github.bumptech.glide:compiler:4.9.0'
    implementation 'com.github.chrisbanes:PhotoView:2.3.0'
    implementation 'com.afollestad.material-dialogs:core:0.9.6.0'
    implementation 'com.google.code.gson:gson:2.8.5'

    implementation "androidx.lifecycle:lifecycle-viewmodel-android:2.8.7"
    implementation "androidx.lifecycle:lifecycle-livedata:2.8.7"
    implementation 'com.king.zxing:zxing-lite:1.1.1'
    implementation 'androidx.swiperefreshlayout:swiperefreshlayout:1.1.0'
    implementation 'androidx.gridlayout:gridlayout:1.0.0'
    implementation 'com.google.android:flexbox:2.0.1'

    implementation 'com.tencent.map.geolocation:TencentLocationSdk-openplatform:7.2.6'
    implementation 'io.kvh:amr:1.1.1'
    implementation 'com.squareup.okhttp3:okhttp:3.11.0'
    implementation 'com.squareup.okio:okio:1.14.0'
    implementation 'com.tbuonomo.andrui:viewpagerdotsindicator:2.1.2'
    implementation 'cn.aigestudio.wheelpicker:WheelPicker:1.1.3'

    // moment start
    implementation project(':momentclient')
    // moment end

    // kit wfc end

     */

}
